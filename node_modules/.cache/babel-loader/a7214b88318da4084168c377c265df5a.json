{"ast":null,"code":"var _jsxFileName = \"/Users/tungdo/pathfinder/src/App.js\";\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Element extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.condition != prevProps.condition) {\n      var current_element = document.getElementById(this.props.id);\n\n      if (this.props.condition == \"default\") {\n        current_element.style.background = '#FFFFFF';\n      } else if (this.props.condition == \"block\") {\n        current_element.style.background = \"#000000\";\n      } else if (this.props.condition == \"considered-d\") {\n        current_element.style.background = \"#FFB266\";\n      } else if (this.props.condition == \"considered\") {\n        current_element.style.background = \"#FF8000\";\n      } else if (this.props.condition == \"endpoint\") {\n        current_element.style.background = \"#33FFFF\";\n      } else if (this.props.condition == \"chosen\") {\n        current_element.style.background = \"#00FF00\";\n      }\n    }\n\n    ;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"square\",\n      id: this.props.id,\n      condition: this.props.condition,\n      onClick: this.props.changecond,\n      children: [\" \", this.props.id, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\n;\n\nclass Graph extends Component {\n  constructor(props) {\n    super(props);\n\n    this.dijkstra = () => {\n      var start_node = this.state.endpoints[0];\n      var target_node = this.state.endpoints[1];\n      var graph = this.state.adjacency_list;\n      console.log(graph);\n      var distances = [1000];\n      var visited = {};\n      var parents = {};\n\n      for (let i = 1; i <= 400; i++) {\n        if (i == start_node) {\n          distances.push(0);\n        } else {\n          distances.push(1000);\n        }\n      }\n\n      var current_min_distance = 0;\n      var current_min_node = start_node;\n      var considering_nodes = setInterval(function () {\n        console.log(this.state.endpoints);\n        this.changeTraverseCondition(current_min_node, \"considered\");\n\n        if (target_node in visited || current_min_distance == 1000) {\n          clearInterval(considering_nodes);\n          var current_node = target_node;\n          var getting_path = setInterval(function () {\n            if (current_node == start_node) {\n              this.changeTraverseCondition(current_node, \"chosen\");\n              clearInterval(getting_path);\n              return;\n            }\n\n            this.changeTraverseCondition(current_node, \"chosen\");\n            current_node = parents[current_node];\n          }.bind(this), 300);\n          return;\n        }\n\n        var current_distances = {};\n\n        for (let j = 0; j < graph[current_min_node].length; j++) {\n          if (!(graph[current_min_node][j] in visited)) {\n            current_distances[graph[current_min_node][j]] = current_min_distance + 1;\n          }\n        }\n\n        Object.keys(current_distances).forEach(function (key) {\n          if (current_distances[key] < distances[key]) {\n            distances[key] = current_distances[key];\n            parents[key] = current_min_node;\n            this.changeTraverseCondition(key, \"considered-d\");\n          }\n        });\n        distances[current_min_node] = 1000;\n        visited[current_min_node] = true;\n        current_min_distance = Math.min.apply(Math, distances);\n        current_min_node = distances.indexOf(current_min_distance);\n      }.bind(this), 1000);\n    };\n\n    this.changeInitialCondition = this.changeInitialCondition.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n    this.changeTraverseCondition = this.changeTraverseCondition.bind(this);\n    this.BFS = this.BFS.bind(this);\n    this.dijkstra = this.dijkstra.bind(this);\n    this.state = {\n      adjacency_list: {},\n      endpoints: [],\n      conditions: {}\n    };\n\n    for (let i = 1; i <= 400; i++) {\n      this.state.conditions[i] = \"default\";\n    }\n\n    ;\n    /* TODO: initialize adjacency_list */\n\n    var new_adjacency_list = {};\n    var first_row = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19];\n    var last_row = [382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399];\n    var first_col = [21, 41, 61, 81, 101, 121, 141, 161, 181, 201, 221, 241, 261, 281, 301, 321, 341, 361];\n    var last_col = [40, 60, 80, 100, 120, 140, 160, 180, 200, 220, 240, 260, 280, 300, 320, 340, 360, 380];\n\n    for (let i = 1; i <= 400; i++) {\n      if (i == 1) {\n        new_adjacency_list[1] = [2, 21, 22];\n      } else if (i == 20) {\n        new_adjacency_list[20] = [19, 39, 40];\n      } else if (i == 381) {\n        new_adjacency_list[381] = [361, 362, 382];\n      } else if (i == 400) {\n        new_adjacency_list[400] = [379, 380, 399];\n      } else if (first_row.includes(i)) {\n        new_adjacency_list[i] = [i - 1, i + 1, i + 20, i + 19, i + 21];\n      } else if (last_row.includes(i)) {\n        new_adjacency_list[i] = [i - 1, i + 1, i - 20, i - 19, i - 21];\n      } else if (first_col.includes(i)) {\n        new_adjacency_list[i] = [i - 20, i + 20, i + 1, i - 19, i + 21];\n      } else if (last_col.includes(i)) {\n        new_adjacency_list[i] = [i - 1, i - 21, i + 20, i + 19, i - 20];\n      } else {\n        new_adjacency_list[i] = [i - 1, i + 1, i - 19, i - 20, i - 21, i + 19, i + 20, i + 21];\n      }\n    }\n\n    ; //this.state.adjacency_list = new_adjacency_list;\n\n    this.state.adjacency_list = new_adjacency_list;\n  }\n\n  changeInitialCondition(i) {\n    var new_conditions = this.state.conditions;\n    var new_endpoints = this.state.endpoints;\n    var new_adjacency_list = this.state.adjacency_list;\n\n    if (this.state.conditions[i] == \"default\") {\n      new_conditions[i] = \"endpoint\";\n      new_endpoints.push(i);\n    } else if (this.state.conditions[i] == \"endpoint\") {\n      new_conditions[i] = \"block\";\n      new_endpoints.splice(new_endpoints.indexOf(i), 1);\n      new_adjacency_list[i] = [];\n      var candidates = [i - 1, i + 1, i - 19, i - 20, i - 21, i + 19, i + 20, i + 21];\n\n      for (var j = 0; j < candidates.length; j++) {\n        if (candidates[j] in new_adjacency_list) {\n          if (new_adjacency_list[candidates[j]].includes(i)) {\n            new_adjacency_list[candidates[j]].splice(new_adjacency_list[candidates[j]].indexOf(i), 1);\n          }\n        }\n      }\n    } else if (this.state.conditions[i] == \"block\") {\n      new_conditions[i] = \"default\";\n      new_adjacency_list = this.updateGraph(i);\n    }\n\n    this.setState(state => ({\n      conditions: new_conditions,\n      endpoints: new_endpoints,\n      adjacency_list: new_adjacency_list\n    }));\n  }\n\n  updateGraph(i) {\n    var new_adjacency_list = this.state.adjacency_list;\n    var first_row = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19];\n    var last_row = [382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399];\n    var first_col = [21, 41, 61, 81, 101, 121, 141, 161, 181, 201, 221, 241, 261, 281, 301, 321, 341, 361];\n    var last_col = [40, 60, 80, 100, 120, 140, 160, 180, 200, 220, 240, 260, 280, 300, 320, 340, 360, 380];\n\n    if (i == 1) {\n      new_adjacency_list[1] = [2, 21, 22];\n    } else if (i == 20) {\n      new_adjacency_list[20] = [19, 39, 40];\n    } else if (i == 381) {\n      new_adjacency_list[381] = [361, 362, 382];\n    } else if (i == 400) {\n      new_adjacency_list[400] = [379, 380, 399];\n    } else if (first_row.includes(i)) {\n      new_adjacency_list[i] = [i - 1, i + 1, i + 20, i + 19, i + 21];\n    } else if (last_row.includes(i)) {\n      new_adjacency_list[i] = [i - 1, i + 1, i - 20, i - 19, i - 21];\n    } else if (first_col.includes(i)) {\n      new_adjacency_list[i] = [i - 20, i + 20, i + 1, i - 19, i + 21];\n    } else if (last_col.includes(i)) {\n      new_adjacency_list[i] = [i - 1, i - 21, i + 20, i + 19, i - 20];\n    } else {\n      new_adjacency_list[i] = [i - 1, i + 1, i - 19, i - 20, i - 21, i + 19, i + 20, i + 21];\n    }\n\n    for (let k = 0; k < new_adjacency_list[i].length; k++) {\n      var element_need_i = new_adjacency_list[i][k];\n      new_adjacency_list[element_need_i].push(i);\n    }\n\n    return new_adjacency_list;\n  }\n\n  changeTraverseCondition(i, new_status) {\n    var new_conditions = this.state.conditions;\n    var new_adjacency_list = this.state.adjacency_list;\n    var new_endpoints = this.state.endpoints;\n    new_conditions[i] = new_status;\n    this.setState(state => ({\n      conditions: new_conditions,\n      endpoints: new_endpoints,\n      adjacency_list: new_adjacency_list\n    }));\n  }\n\n  BFS() {\n    var start_node = this.state.endpoints[0];\n    var target_node = this.state.endpoints[1];\n    var graph = this.state.adjacency_list;\n    var queue = [start_node];\n    var visited = {};\n    visited[start_node] = true;\n    var new_queue = [];\n    var parents = {};\n    var considering_intervals = setInterval(function () {\n      if (queue.length == 0 || target_node in visited) {\n        clearInterval(considering_intervals);\n\n        if (target_node in visited) {\n          var current_node = target_node;\n          var getting_path = setInterval(function () {\n            if (current_node == start_node) {\n              this.changeTraverseCondition(current_node, \"chosen\");\n              clearInterval(getting_path);\n              return;\n            }\n\n            this.changeTraverseCondition(current_node, \"chosen\");\n            current_node = parents[current_node];\n          }.bind(this), 300);\n        }\n\n        return;\n      }\n\n      new_queue = [];\n\n      for (let i = 0; i < queue.length; i++) {\n        for (let j = 0; j < graph[queue[i]].length; j++) {\n          if (!(graph[queue[i]][j] in visited)) {\n            parents[graph[queue[i]][j]] = queue[i];\n            new_queue.push(graph[queue[i]][j]);\n            visited[graph[queue[i]][j]] = true;\n          }\n        }\n      }\n\n      queue = new_queue;\n\n      for (let k = 0; k < queue.length; k++) {\n        if (this.state.conditions[queue[k]] != \"endpoint\") {\n          this.changeTraverseCondition(queue[k], \"considered\");\n        }\n      }\n    }.bind(this), 300);\n  }\n\n  renderElement(i) {\n    return /*#__PURE__*/_jsxDEV(Element, {\n      id: i,\n      condition: this.state.conditions[i],\n      changecond: () => this.changeInitialCondition(i)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 12\n    }, this);\n  }\n\n  renderElements(start) {\n    var elements = [];\n\n    for (let i = 20 * (start - 1) + 1; i <= 20 * start; i++) {\n      elements.push(this.renderElement(i));\n    }\n\n    return elements;\n  }\n\n  renderBoard() {\n    var board = [];\n\n    for (let i = 1; i <= 20; i++) {\n      board.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board-row\",\n        style: {\n          margin: '0'\n        },\n        children: [\" \", this.renderElements(i), \"  \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 18\n      }, this));\n    }\n\n    return board;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.renderBoard(), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.BFS,\n        children: \" Breadth First Search \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.dijkstra,\n        children: \" Dijkstra's Algorithm \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Graph, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 5\n  }, this);\n}\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/tungdo/pathfinder/src/App.js"],"names":["Component","Element","constructor","props","componentDidUpdate","prevProps","condition","current_element","document","getElementById","id","style","background","render","changecond","Graph","dijkstra","start_node","state","endpoints","target_node","graph","adjacency_list","console","log","distances","visited","parents","i","push","current_min_distance","current_min_node","considering_nodes","setInterval","changeTraverseCondition","clearInterval","current_node","getting_path","bind","current_distances","j","length","Object","keys","forEach","key","Math","min","apply","indexOf","changeInitialCondition","updateGraph","BFS","conditions","new_adjacency_list","first_row","last_row","first_col","last_col","includes","new_conditions","new_endpoints","splice","candidates","setState","k","element_need_i","new_status","queue","new_queue","considering_intervals","renderElement","renderElements","start","elements","renderBoard","board","margin","App"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport { Component } from 'react';\n\nclass Element extends Component { \n  constructor(props) {\n    super(props);\n  };\n  componentDidUpdate(prevProps) {\n    if (this.props.condition != prevProps.condition) { \n      var current_element = document.getElementById(this.props.id);\n      if (this.props.condition == \"default\") { \n        current_element.style.background = '#FFFFFF';\n      }\n      else if (this.props.condition == \"block\") { \n        current_element.style.background = \"#000000\";\n      }\n      else if (this.props.condition == \"considered-d\") { \n        current_element.style.background = \"#FFB266\"\n      }\n      else if (this.props.condition == \"considered\") { \n        current_element.style.background = \"#FF8000\";\n      }\n      else if (this.props.condition == \"endpoint\") { \n        current_element.style.background = \"#33FFFF\";\n      }\n      else if (this.props.condition == \"chosen\") { \n        current_element.style.background = \"#00FF00\";\n      }\n    }; \n  };\n  render() { \n    return <button className=\"square\" id = {this.props.id} condition = {this.props.condition} onClick = {this.props.changecond}> {this.props.id} </button>;\n  };\n};\n\nclass Graph extends Component { \n  constructor(props) { \n    super(props); \n    this.changeInitialCondition = this.changeInitialCondition.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n    this.changeTraverseCondition = this.changeTraverseCondition.bind(this);\n    this.BFS = this.BFS.bind(this);\n    this.dijkstra = this.dijkstra.bind(this);\n    this.state = { \n      adjacency_list: {},\n      endpoints:[], \n      conditions:{}, \n    };\n    for (let i = 1; i <= 400; i++) {\n      this.state.conditions[i] = \"default\"; \n    };\n    /* TODO: initialize adjacency_list */\n    var new_adjacency_list = {}\n    var first_row = [2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]\n    var last_row = [382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399]\n    var first_col = [21,41,61,81,101,121,141,161,181,201,221,241,261,281,301,321,341,361]\n    var last_col = [40,60,80,100,120,140,160,180,200,220,240,260,280,300,320,340,360,380]\n    for (let i = 1; i <= 400; i++) { \n      if (i == 1) { \n        new_adjacency_list[1] = [2,21, 22]\n      }\n      else if (i == 20) { \n        new_adjacency_list[20] = [19,39,40]\n      }\n      else if (i == 381) { \n        new_adjacency_list[381] = [361,362,382]\n      }\n      else if (i == 400) { \n        new_adjacency_list[400] = [379, 380, 399]\n      }\n      else if (first_row.includes(i)) { \n        new_adjacency_list[i] = [i-1, i+1, i+20, i+19, i+21]\n      }\n      else if (last_row.includes(i)) { \n        new_adjacency_list[i] = [i-1, i+1, i-20, i-19, i-21]\n      }\n      else if (first_col.includes(i)) { \n        new_adjacency_list[i] = [i-20, i+20, i+1, i-19, i+21]\n      }\n      else if (last_col.includes(i)) { \n        new_adjacency_list[i] = [i-1, i-21, i + 20, i + 19, i- 20]\n      }\n      else { \n        new_adjacency_list[i] = [i-1, i+1, i-19, i- 20, i- 21, i+ 19, i +20, i+21]\n      }\n    };\n    //this.state.adjacency_list = new_adjacency_list;\n    this.state.adjacency_list = new_adjacency_list\n  };\n\n  changeInitialCondition(i) { \n    var new_conditions = this.state.conditions;\n    var new_endpoints = this.state.endpoints;\n    var new_adjacency_list = this.state.adjacency_list; \n    if (this.state.conditions[i] == \"default\") { \n      new_conditions[i] = \"endpoint\"; \n      new_endpoints.push(i) \n    }\n    else if (this.state.conditions[i] == \"endpoint\") { \n      new_conditions[i] = \"block\"; \n      new_endpoints.splice(new_endpoints.indexOf(i), 1); \n      new_adjacency_list[i] = []\n      var candidates = [i-1, i+1, i-19, i- 20, i- 21, i+ 19, i +20, i+21]\n      for (var j=0; j < candidates.length; j++) { \n        if (candidates[j] in new_adjacency_list) { \n          if (new_adjacency_list[candidates[j]].includes(i)) { \n            new_adjacency_list[candidates[j]].splice(new_adjacency_list[candidates[j]].indexOf(i), 1); \n          }\n        }\n      }\n    }\n    else if (this.state.conditions[i] == \"block\") { \n      new_conditions[i] = \"default\"; \n      new_adjacency_list = this.updateGraph(i)\n    }\n    this.setState(state => ({ \n      conditions: new_conditions,\n      endpoints: new_endpoints,\n      adjacency_list: new_adjacency_list, \n    })); \n  }; \n\n  updateGraph(i) { \n    var new_adjacency_list = this.state.adjacency_list; \n    var first_row = [2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19];\n    var last_row = [382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399];\n    var first_col = [21,41,61,81,101,121,141,161,181,201,221,241,261,281,301,321,341,361];\n    var last_col = [40,60,80,100,120,140,160,180,200,220,240,260,280,300,320,340,360,380];\n    if (i == 1) { \n      new_adjacency_list[1] = [2,21, 22];\n    }\n    else if (i == 20) { \n      new_adjacency_list[20] = [19,39,40];\n    }\n    else if (i == 381) { \n      new_adjacency_list[381] = [361,362,382];\n    }\n    else if (i == 400) { \n      new_adjacency_list[400] = [379, 380, 399];\n    }\n    else if (first_row.includes(i)) { \n      new_adjacency_list[i] = [i-1, i+1, i+20, i+19, i+21];\n    }\n    else if (last_row.includes(i)) { \n      new_adjacency_list[i] = [i-1, i+1, i-20, i-19, i-21];\n    }\n    else if (first_col.includes(i)) { \n      new_adjacency_list[i] = [i-20, i+20, i+1, i-19, i+21];\n    }\n    else if (last_col.includes(i)) { \n      new_adjacency_list[i] = [i-1, i-21, i + 20, i + 19, i- 20];\n    }\n    else { \n      new_adjacency_list[i] = [i-1, i+1, i-19, i- 20, i- 21, i+ 19, i +20, i+21];\n    }\n    for (let k=0; k < new_adjacency_list[i].length; k++) { \n      var element_need_i = new_adjacency_list[i][k];\n      new_adjacency_list[element_need_i].push(i);\n    }\n    return new_adjacency_list; \n  };\n\n  changeTraverseCondition(i, new_status) { \n    var new_conditions = this.state.conditions; \n    var new_adjacency_list = this.state.adjacency_list; \n    var new_endpoints = this.state.endpoints\n    new_conditions[i] = new_status; \n    this.setState(state => ({ \n      conditions: new_conditions,\n      endpoints: new_endpoints,\n      adjacency_list: new_adjacency_list, \n    })); \n  }\n\n  \n  BFS (){ \n    var start_node = this.state.endpoints[0];\n    var target_node = this.state.endpoints[1];\n    var graph = this.state.adjacency_list;\n    var queue = [start_node]; \n    var visited = {};\n    visited[start_node] = true; \n    var new_queue = [];\n    var parents = {};\n    var considering_intervals = setInterval(function(){\n        if (queue.length == 0 || target_node in visited) { \n          clearInterval(considering_intervals);\n          if (target_node in visited) { \n            var current_node = target_node; \n            var getting_path = setInterval(function() { \n              if (current_node == start_node) { \n                this.changeTraverseCondition(current_node, \"chosen\");\n                clearInterval(getting_path); \n                return \n              }\n              this.changeTraverseCondition(current_node, \"chosen\");\n              current_node = parents[current_node]; \n            }.bind(this), 300)\n          }\n          return \n        }\n        new_queue = [];  \n        for (let i = 0; i < queue.length; i++) { \n            for (let j = 0; j < graph[queue[i]].length; j++) { \n                if (!(graph[queue[i]][j] in visited)) { \n                    parents[graph[queue[i]][j]] = queue[i];\n                    new_queue.push(graph[queue[i]][j]);\n                    visited[graph[queue[i]][j]] = true;\n                }\n            }\n        }\n        queue = new_queue; \n        for (let k = 0; k < queue.length; k++) { \n            if (this.state.conditions[queue[k]] != \"endpoint\") { \n            this.changeTraverseCondition(queue[k], \"considered\");\n            }\n          }\n        }.bind(this), 300)\n  }\n\n  dijkstra = () => { \n    var start_node = this.state.endpoints[0];\n    var target_node = this.state.endpoints[1];\n    var graph = this.state.adjacency_list;\n    console.log(graph) \n    var distances = [1000]\n    var visited = {}\n    var parents = {}\n    for (let i=1; i <= 400;i++) { \n        if (i == start_node) { \n            distances.push(0)\n        }\n        else { \n            distances.push(1000)\n        }\n    } \n    var current_min_distance = 0 \n    var current_min_node = start_node\n    var considering_nodes = setInterval(function() { \n        console.log(this.state.endpoints)\n        this.changeTraverseCondition(current_min_node, \"considered\")\n        if ((target_node in visited) || current_min_distance == 1000) { \n            clearInterval(considering_nodes); \n            var current_node = target_node; \n            var getting_path = setInterval(function() { \n              if (current_node == start_node) { \n                this.changeTraverseCondition(current_node, \"chosen\");\n                clearInterval(getting_path); \n                return \n              }\n              this.changeTraverseCondition(current_node, \"chosen\");\n              current_node = parents[current_node]; \n            }.bind(this), 300)\n            return \n        }\n        var current_distances = {}\n        for (let j=0; j < graph[current_min_node].length; j++) { \n            if (!(graph[current_min_node][j] in visited)) { \n            current_distances[graph[current_min_node][j]] = current_min_distance + 1 \n        }\n        }\n        Object.keys(current_distances).forEach(function(key) { \n            if (current_distances[key] < distances[key]) { \n                distances[key] = current_distances[key]\n                parents[key] = current_min_node\n                this.changeTraverseCondition(key, \"considered-d\")\n            }\n        })\n        distances[current_min_node] = 1000\n        visited[current_min_node] = true\n        current_min_distance = Math.min.apply(Math, distances);\n        current_min_node = distances.indexOf(current_min_distance);\n    }.bind(this), 1000)\n  };\n\n  renderElement(i) { \n    return <Element id={i} condition={this.state.conditions[i]} changecond={() => this.changeInitialCondition(i)}/>\n  }\n\n  renderElements(start) { \n    var elements = []; \n    for (let i = 20*(start-1) + 1; i <= 20*start; i++) { \n      elements.push(this.renderElement(i)); \n    }\n    return elements\n  }\n\n  renderBoard() { \n    var board = []; \n    for (let i = 1; i <= 20; i++) { \n      board.push(<div className = \"board-row\" style= {{margin: '0'}}> {this.renderElements(i)}  </div>); \n    }\n    return board\n  }\n\n  render() { \n    return (\n      <div> \n      {this.renderBoard()}\n      <button onClick = {this.BFS}> Breadth First Search </button>\n      <button onClick = {this.dijkstra}> Dijkstra's Algorithm </button>\n      </div>\n    )\n  }\n}\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n    <Graph/>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}